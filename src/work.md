# 職務経歴書

## 要約

バックエンド約3年、SRE約1年経験してきました。現職ではEnablingチームとしてインフラやIaC環境の整備などを行っています。（領域的にはSREやDevOps辺りになります。）

バックエンドは主にPHP/Laravelを使用し、[LaravelでN+1を解決するために雰囲気でeager loadを使っている](https://qiita.com/wim/items/66ae4e3a58427f86cb5f)のようにLaravel内部のコードを理解した上で実装したり、[負荷試験のふの字も知らないエンジニアが負荷試験をやってみる（Laravel）](https://zenn.dev/wim/articles/laravel_load-test)のようにミドルウェア・インフラまで含めた運用や改善などを行ったりしてきました。

SREとしては地道に整備していくフェーズが多く、[サービス信頼性階層](https://sre.google/sre-book/part-III-practices/#fig_part-practices_reliability-hierarchy)でいうMonitoring, Incident Response, Postmortemを整備したり、TerraformのCI/CDを整えることで誰でもTerraformを実行できるようにしたりといったことを行ってきました。

いままで前職と現職の2社でIPO準備に携わっており（N-3期前後付近）、それに準じたAWSアカウントの運用方法などを中心にやってきており、いままでスピード重視で開発してきたがそろそろいろいろ整えていきたいといったフェーズに強みがあります。

## 技術スタック

PHP / Laravel / Go / AWS / Terraform / GitHub Actions / Renovate / Datadog

## 略歴

在籍期間 | 企業名 | 職種
--- | --- | --- |
2023/07 - 現在 | クラフトバンク株式会社 | Enablingチーム
2021/12 - 2023/07 | 株式会社トラーナ | バックエンドエンジニア・SRE
2019/07 - 2021/11 | 株式会社insprout | バックエンドエンジニア

## クラフトバンク株式会社 2023/07 - xxxx/xx

Enablingチームに所属しておりSREやDevOps、クラウドインフラを中心に活動しています。SREと呼称していない理由はすべての開発者がSREの役割を果たすべきだと考える点、チーム名にSREとつけることでSREが特別なポジションになるのを避けたかった点などがあります。

入社時の会社の課題としては、IaC化されていないことによるインフラ管理の不透明さやIPOに対応できるAWSアカウントの運用などでそこを中心に改善しているところです。

### インフラ構成のTerraform化

既存の構成をTerraformに落とし込みつつ問題点の洗い出しも行っています。各環境で差分が少なくある程度気軽に複数環境を構築したいといった背景もあるので、moduleを使って共通化をしつつ、GitHub Actionsを整えて開発者でもコミットできるような環境を作成しています。

### AWSアカウントのマルチアカウント化

本番とそれ以外では求められるセキュリティや内部統制が異なるのでアカウントを分離することでそれらを実現しようとしています。AWSが提唱しているWell-ArchitectedやLanding Zoneに基本的には則っています。

利用しているAWSサービスとしては、Control Tower, Organizations, Identity Centerなどになります。Control Towerを採用している理由としては、自分で実装するよりもサービスを採用することで他の人が運用しやすくするためです。

## 株式会社トラーナ 2021/12 - 2023/07

入社直後はバックエンドエンジニアとしてLaravelを使ったサービスの機能開発や修正、新規サービスのGraphQL
の実装をしていました。それ以外にもTerraformやPackerを使ったインフラ管理なども行っていました。2022/4から新設されたSREチームに異動しました。

2023/3からEMにチャレンジするため、採用や1on1、メンバーのマネジメントも行っていましたが現状ではEMで働くことは考えていません。この経験自体は今後のチームビルディングなどに役立つと考えています。

トラーナに入社して一番変わったのは考え方で、いままでは技術志向が強くビジネスにあまり関心がなかったのですがスタートアップといった性質上メンバーレベルでもキャッシュを意識せざるをえない環境で、どうすれば最終的に最大の価値をデリバリーできるかを考えるようになりました。

### SREチーム

SREチームには自分を含めて3人所属をしていましたが全員SRE未経験だったので[SRE サイトリライアビリティエンジニアリング](https://www.oreilly.co.jp/books/9784873117911/)の輪読会を開催して理解を深めました。このときからSREチームとしては開発者 implements SREを実現してSREチームを解散するを目標にしてきました。

主に[サービス信頼性階層](https://sre.google/sre-book/part-III-practices/#fig_part-practices_reliability-hierarchy)のMonitoring, Incident Response, Postmortemの整備を進めていましたがそれらを各チームが運用できるようにするところが一番難しく、根気よくコミュニケーションを取りながら進めていきました。

### Terraform環境の整備

当初はローカルでTerraformを実行していたり、単一stateのみで運用していたりと複数人が触れる状況ではなかったので、リモートでTerraformを実行する環境整備しました。  
実行環境の変遷は、ローカル -> Terraform Cloud -> GitHub Actionsになります。  
単一stateを複数stateに分けることで影響範囲を狭めたり、アプリケーションチームがコミットしやすくしたりしました。

### AWSアカウントの整備

1アカウントで運用していたので、AWS Organizations, Control Tower, SSOを導入し、マルチアカウントで運用するように変更しました。  
IPO対応として本番アカウントを分離し権限をReadに絞り、必要に応じてChange Managerで申請することによって権限付与・DBアカウントの自動生成などを実装しました。

## 株式会社insprout 2019/07 - 2021/11

受託会社だったため新規プロジェクト3件と既存プロジェクト1件を担当しました。基本的な構成はEC2上でLaravelを使用したスタンダードな構成です。人数もおおよそ1-3名ほどで開発をしていました。

### CMSとAPIの開発

CMSの管理画面とアプリへのAPIの開発が主な業務になります。リリースして半年ほど経ったものを前任者から引き継ぎをし、新規機能の追加やバグの修正、パフォーマンス向上などの運用保守を担当しました。

管理画面の権限の種類を2種類から増やしたい要件があったので権限周りを拡張するためにテーブル設計から取り掛かりました。[casbin](https://casbin.org/ja/)などのライブラリの使用も検討しましたが、テーブル構造やカラム名が固定など要件と合わなかったため自作しました。  基本的にはRBAC(ロールベース)で作成しましたがABAC(属性ベース)で制御したい箇所もあったため、ABACでも拡張できるように実装しました。

PHPやLaravelのチューニングがされていなかったので、OPCacheやLaravelのキャッシュの導入をしてレスポンスなどの改善を図りました。結果、CPU使用率を約半分、レイテンシを100msほど短縮することに成功しました。（[負荷試験のふの字も知らないエンジニアが負荷試験をやってみる（Laravel）](https://zenn.dev/wim/articles/laravel_load-test)）

### AWSマルチアカウント化

ここではじめてのAWSマルチアカウント運用を開始しました。このときはControl Towerが東京リージョンで提供されていなかったので自分でTerraformを書いてLanding Zoneの構築をしました。[TerraformでAWSのマルチアカウント環境を整備する](https://zenn.dev/wim/articles/aws_landing_zone_with_terraform)

### 機能の分離(サーバーレス化)

他の処理の影響で、重要な処理が止まるという事象が2回発生しました。このため、アーキテクチャの見直しを行いました。おおまかな構成としては以下になります。

API Gateway -> Step Functions(lambda) -> SNS -> Firehose -> S3 -> Glue -> S3 -> Athena

- Lambda
    - Multi-AZでEC2を構築するのに比べてスケールが楽、現状リクエスト数は1日平均でみると多くないがアプリの性質上ある程度のスパイクがあってもスケールしてほしいため。
    - 1日で見るとリクエスト数が多くないのでコスト面で有利になるため。
- Step Functions
    - Lambdaだけでは細かなエラー処理やリトライ処理ができないのでStep Functionsで処理するため。[LambdaのエラーをStep Functionsでハンドリングする](https://zenn.dev/wim/articles/handle_lambda_errors_with_step_functions)
- API Gateway
    - SQSからは直接Step Functionsを起動できないため。
    - 当初は他にもAPIを用意する必要があったため。
- Athena
    - ログに対してクエリする頻度は低めなので従量課金でコストを抑えられるため。
    - 将来的に可視化する案もあり、QuickSightと組み合わせることで実現できるため。

## 各種リンク

- [GitHub](https://github.com/wim-web)
- [Zenn](https://zenn.dev/wim)
- [Qiita](https://qiita.com/wim)

---

Auto generated by <https://github.com/wim-web/resume>  
© 2023 wim. All rights reserved.
